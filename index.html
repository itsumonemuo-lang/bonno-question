<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ç…©æ‚©ã‚«ãƒ¼ãƒ‰</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: "Hiragino Mincho ProN", serif;
  background: url("background.jpg") center / cover no-repeat fixed;
}

#container {
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}

#card {
  width: 90%;
  max-width: 420px;
  background: url("washi.jpg") center / cover;
  padding: 30px;
  border-radius: 14px;
  box-shadow: 0 15px 35px rgba(0,0,0,.35);
  text-align: center;
  position: relative;
  overflow: hidden;
}

#card.flip {
  animation: flip 0.6s ease;
}

@keyframes flip {
  0% { transform: rotateY(0); }
  50% { transform: rotateY(90deg); }
  100% { transform: rotateY(0); }
}

#kirari {
  position: absolute;
  inset: 0;
  background: url("kirari.png") center / contain no-repeat;
  opacity: 0;
  pointer-events: none;
}

#kirari.show {
  animation: shine 0.6s ease;
}

@keyframes shine {
  0% { opacity: 0; transform: scale(.8); }
  50% { opacity: .9; transform: scale(1); }
  100% { opacity: 0; transform: scale(1.2); }
}

button {
  padding: 12px 22px;
  font-size: 16px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}

#question {
  margin-top: 20px;
  font-size: 18px;
  white-space: pre-wrap;
  line-height: 1.7;
}

#count {
  margin-top: 10px;
  font-size: 13px;
  opacity: .7;
}

#share-area {
  display: none;
  margin-top: 25px;
}

.share-btn {
  display: inline-block;
  margin: 6px;
  padding: 10px 14px;
  color: #fff;
  text-decoration: none;
  border-radius: 6px;
  font-size: 14px;
}

.x { background:#000; }
.line { background:#06C755; }
.insta { background:#C13584; }
</style>
</head>

<body>
<div id="container">
  <div id="card">
    <div id="kirari"></div>

    <h2>ä»Šæ—¥ã²ã‚‰ã„ãŸç…©æ‚©è³ªå•</h2>
    <button onclick="drawCard()">ã‚«ãƒ¼ãƒ‰ã‚’ã‚ãã‚‹</button>

    <div id="question"></div>
    <div id="count"></div>

    <div id="share-area">
      <p>ğŸ” ç…©æ‚©ã‚’ã‚·ã‚§ã‚¢ã™ã‚‹</p>
      <a id="share-x" class="share-btn x" target="_blank">X</a>
      <a id="share-line" class="share-btn line" target="_blank">LINE</a>
      <a id="share-insta" class="share-btn insta" target="_blank">Instagram</a>
    </div>
  </div>
</div>

<audio id="flip-sound" src="flip.mp3"></audio>

<script>
const questions = [
  "Q. äººã¨æ¯”ã¹ã¦è‹¦ã—ããªã‚‹ã®ã¯ã©ã‚“ãªã¨ãï¼Ÿ\n\nA. ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿",
  "Q. æ‰‹æ”¾ã—ãŸã„ã®ã«æ‰‹æ”¾ã›ãªã„ã‚‚ã®ã¯ï¼Ÿ\n\nA. ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿",
  "Q. èªã‚ã‚‰ã‚ŒãŸã„ã¨æ€ã†ã®ã¯ã©ã‚“ãªç¬é–“ï¼Ÿ\n\nA. ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿",
  "Q. ã¤ã„è¦‹æ „ã‚’å¼µã£ã¦ã—ã¾ã†ã®ã¯ã©ã‚“ãªã¨ãï¼Ÿ\n\nA. ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿"
];

let lastIndex = -1;

// è¡¨ç¤ºå›æ•°ï¼ˆç«¯æœ«ã”ã¨ï¼‰
let count = localStorage.getItem("bonnoCount") || 0;
document.getElementById("count").innerText =
  `ã‚ãªãŸã§ ${count} å›ç›®ã®è³ªå•ã§ã™`;

function drawCard() {
  let i;
  do {
    i = Math.floor(Math.random() * questions.length);
  } while (i === lastIndex);
  lastIndex = i;

  const card = document.getElementById("card");
  const kirari = document.getElementById("kirari");
  const sound = document.getElementById("flip-sound");

  card.classList.add("flip");
  kirari.classList.add("show");
  sound.currentTime = 0;
  sound.play();

  setTimeout(() => {
    document.getElementById("question").innerText = questions[i];

    count++;
    localStorage.setItem("bonnoCount", count);
    document.getElementById("count").innerText =
      `ã‚ãªãŸã§ ${count} å›ç›®ã®è³ªå•ã§ã™`;

    setupShare(questions[i]);

    card.classList.remove("flip");
    kirari.classList.remove("show");
    document.getElementById("share-area").style.display = "block";
  }, 300);
}

function setupShare(q) {
  const text = "ä»Šæ—¥ã²ã‚‰ã„ãŸç…©æ‚©è³ªå•ã€‚\n" + q + "\n\n#ç…©æ‚©ã‚«ãƒ¼ãƒ‰";
  const e = encodeURIComponent(text);
  const u = encodeURIComponent(location.href);

  document.getElementById("share-x").href =
    `https://twitter.com/intent/tweet?text=${e}&url=${u}`;

  document.getElementById("share-line").href =
    `https://social-plugins.line.me/lineit/share?url=${u}&text=${e}`;

  document.getElementById("share-insta").href =
    "https://www.instagram.com/";
}
</script>
</body>
</html>

